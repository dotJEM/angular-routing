(function(n,t,r){"use strict";function e(n,t){return m(new(m(function(){},{prototype:n})),t)}function a(n){return h(n)?n:n.$fullname||n.fullname}function o(){function n(n,t){var r=[];return v((n||"").split(":"),function(n,e){if(0==e)r.push(n);else{var a=n.match(/(\w+)(.*)/),o=a[1];r.push(t[o]),r.push(a[2]||""),delete t[o]}}),r.join("")}function t(t){var r=null;return function(e,a){return null===r&&(r=t?h(t)?function(r,e){var a=n(t,e.params);r.path(a).search(e.params).replace()}:function(n,r){n.url(t(r.pathParams,n.path(),n.search())).replace()}:function(){}),r(e,a)}}function a(n){var t,r=n[6]||"",e=n[8];if(e&&(t=e.trim(),"{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]))try{e=angular.fromJson(t)}catch(a){}return{name:n[3]||n[9],converter:p[r](e)}}function o(n){return n.replace(b,"\\$&")}function i(n){var t,r="^",e=[],i=0,u="";if("/"===n)return{complete:RegExp("^[/]?$",u),segments:[]};for(;null!==(t=x.exec(n));)r+=o(n.slice(i,t.index)),r+="/([^\\/]*)",e.push(a(t)),i=x.lastIndex;return r+=o(n.substr(i)),w||(u+="i"),"/"===r[r.length-1]&&(r=r.substr(0,r.length-1)),{complete:RegExp(r+"/?$",u),segments:e}}function u(n){var t,r="",e=0,a=0,o={};if(null===n)return{name:null,params:o};for(;null!==(t=x.exec(n));){var i=t[6]||"",u=t[3]||t[9];o[u]={id:a,converter:i},""!==i&&(i=":"+i),r+=n.slice(e,t.index)+"/$"+a++ +i,e=x.lastIndex}return r+=n.substr(e),w||(r=r.toLowerCase()),{name:r,params:o}}function c(n){if(null==n)return function(){};var t=function(){var r=i(n);return t=function(){return r},t()};return function(n){var e,a=t(),o=n.match(a.complete),i={};return o&&(e=!1,v(a.segments,function(n,t){var r,a;e||(r=o[t+1],a=n.converter(r),l(a.accept)?(a.accept||(e=!0),i[n.name]=a.value):(a||(e=!0),i[n.name]=r))}),!e)?i:r}}var f=this,s={},p={},$={},w=!0;this.convert=function(n,t){return p[n]=t,f},this.when=function(n,r){var e=u(n);return s[e.name]={self:m({reloadOnSearch:!0},r),redirect:t(r.redirectTo),match:c(n),path:n,params:e.params},f},this.otherwise=function(n){return f.when(null,n),f},this.decorate=function(n,t){return $[n]=t,f},this.ignoreCase=function(){return w=!1,f},this.matchCase=function(){return w=!0,f};var b=/[-\/\\^$*+?.()|[\]{}]/g,x=RegExp("/((:(\\w+))|(\\{((\\w+)(\\((.*?)\\))?:)?(\\w+)\\}))","g");this.convert("num",function(){return function(n){var t=!isNaN(n);return{accept:t,value:t?Number(n):0}}}),this.convert("regex",function(n){var t,r,e="";if(d(n)&&l(n.exp))t=n.exp,l(n.flags)&&(e=n.flags);else{if(!(h(n)&&n.length>0))throw Error("The Regular-expression converter was not initialized with a valid object.");t=n}return r=RegExp(t,e),function(n){var t=r.test(n);return{accept:t,value:t?r.exec(n):null}}}),this.convert("",function(){return function(){return!0}}),this.$get=["$rootScope","$location","$q","$injector","$routeParams",function(n,t,a,o,i){function u(n,t,r){var a=e(n,{self:e(n.self,{params:m({},r,t),searchParams:r,pathParams:t})});return a}function c(n){var r,e;return v(s,function(a){!e&&(r=a.match(n))&&(e=u(a,r,t.search()))}),e||s[null]&&u(s[null],{},{})}function l(){var e=c(t.path()),u=h.current,l=e?e.self:r;if(!f&&l&&u&&angular.equals(l.pathParams,u.pathParams)&&!l.reloadOnSearch)u.params=e.params,g(l.params,i),n.$broadcast("$routeUpdate",u);else if(e||u){f=!1;var s=n.$broadcast("$routeChangeStart",l,u);if(!s.defaultPrevented){h.current=l,e&&e.redirect(t,l);var d=a.when(l);l&&v($,function(n){d=d.then(function(){var t=o.invoke(n,l,{$next:l});return a.when(t)})}),d.then(function(){l===h.current&&(e&&angular.copy(l.params,i),n.$broadcast("$routeChangeSuccess",l,u))},function(t){l===h.current&&n.$broadcast("$routeChangeError",l,u,t)})}}}var f=!1,h={routes:s,reload:function(){f=!0,n.$evalAsync(l)}};return n.$on("$locationChangeSuccess",l),h}]}function i(){function n(n){var t={handler:{}};return l(n.to)&&(t.to=n.to),l(n.from)&&(t.from=n.from),l(n.handler)&&(t.handler=n.handler),l(n.before)&&f(t.handler.before)&&(t.handler.before=n.before),l(n.between)&&f(t.handler.between)&&(t.handler.between=n.between),l(n.after)&&f(t.handler.after)&&(t.handler.after=n.after),t}function t(n,t){var e=r(n),a=r(t);if(!e||!a){if(e)throw Error("Invalid transition - to: '"+t+"'.");if(a)throw Error("Invalid transition - from: '"+n+"'.");throw Error("Invalid transition - from: '"+n+"', to: '"+t+"'.")}}function r(n){return"*"===n||i.test(n)?!0:!1}function e(n){for(var t=o,r=n.split("."),e="root"===r[0]?1:0;r.length>e;e++)r[e]in t.children||(t.children[r[e]]={children:{},targets:{}}),t=t.children[r[e]];return t}var o={children:{},targets:{}},i=/^\w+(\.\w+)*(\.[*])?$/,u=this;this.onEnter=function(t,r){if(d(r)){var e=n(r);this.transition(e.from||"*",t,e.handler)}else(s(r)||p(r))&&this.transition("*",t,r)},this.onExit=function(t,r){if(d(r)){var e=n(r);this.transition(t,e.to||"*",e.handler)}else(s(r)||p(r))&&this.transition(t,"*",r)},this.transition=function(n,r,o){var i,u=this;if(p(n))v(n,function(n){u.transition(n,r,o)});else if(p(r))v(r,function(t){u.transition(n,t,o)});else{if(n=a(n),r=a(r),r===n&&-1===r.indexOf("*"))return this;t(n,r),(angular.isFunction(o)||angular.isArray(o))&&(o={between:o}),i=e(n),r in i.targets||(i.targets[r]=[]),o.name=n+" -> "+r,i.targets[r].push(o)}return this},this.$get=["$q","$injector",function(n,t){function r(n,r){function e(e,a){var o;v(i,function(i){l(o=e(i))&&t.invoke(o,u,{$to:r,$from:n,$transition:a})})}var o=f(a(n)),i=c(o,a(r));return{before:function(n){e(function(n){return n.before},n)},between:function(n){e(function(n){return n.between},n)},after:function(n){e(function(n){return n.after},n)}}}function e(n){return"root"===n[0]&&n.splice(0,1),n}function i(n,t){for(var r,a,o=e(n.split(".")).reverse(),i=e(t.split(".")).reverse();;){if(r=o.pop(),a=i.pop(),"*"===a||"*"===r)return!0;if(r!==a)return!1;if(!l(r)||!l(a))return!0}return!0}function c(n,t){var r=[];return v(n,function(n){v(n.targets,function(n,e){i(e,t)&&v(n,function(n){r.push(n)})})}),r}function f(n){var t=o,r=n.split("."),e=[],a="root"===r[0]?1:0;do{if("*"in t.children&&e.push(t.children["*"]),!(r[a]in t.children))break;t=t.children[r[a]],e.push(t)}while(a++<r.length);return e}var s={root:o,find:r};return s}]}function u(){var n=RegExp("^(((http|https|ftp)://([\\w-\\d]+\\.)+[\\w-\\d]+){0,1}(/?[\\w~,;\\-\\./?%&+#=]*))","i");this.$get=["$http","$q","$injector","$templateCache",function(t,r,e,a){function o(n){return t.get(n,{cache:a}).then(function(n){return n.data})}function i(n){return r.when(e.invoke(n))}function u(n){if(l(n.url))return o(n.url);if(l(n.fn))return i(n.fn);if(l(n.html))return r.when(n.html);throw Error("Object must define url, fn or html.")}return this.get=function(t){if(h(t))return n.test(t)?o(t):r.when(t);if(s(t)||p(t))return i(t);if(d(t))return u(t);throw Error("Template must be either an url as string, function or a object defining either url, fn or html.")},this}]}function c(){this.$get=["$rootScope","$q","$template",function(n,t,e){function a(n){if("undefined"===n)throw Error("Must define a view name.")}function o(t){n.$broadcast("$viewUpdate",t)}function i(t,r){n.$broadcast("$viewRefresh",t,r)}function u(n,t){return t in n&&null!==n[t]}var c={},l=null;return this.clear=function(n){var t=this;if(f(n))v(c,function(n,r){t.clear(r)});else{if(l)return l.records[n]={act:"clear",fn:function(){t.clear(n)}},r;delete c[n],o(n)}},this.setOrUpdate=function(n,t,i){var f=this;return a(n),l?(l.records[n]={act:"setOrUpdate",fn:function(){f.setOrUpdate(n,t,i)}},r):(u(c,n)?(c[n].template=e.get(t),c[n].controller=i,c[n].version++):c[n]={template:e.get(t),controller:i,version:0},o(n),r)},this.setIfAbsent=function(n,t,i){var f=this;return a(n),l?(u(l.records,n)&&"clear"!==l.records[n].act||(l.records[n]={act:"setIfAbsent",fn:function(){f.setIfAbsent(n,t,i)}}),r):(u(c,n)||(c[n]={template:e.get(t),controller:i,version:0},o(n)),r)},this.get=function(n){return f(n)?c:c[n]},this.refresh=function(n,t){var e=this;if(f(n))v(c,function(n,t){e.clear(t)});else{if(l)return l.records[n]={act:"refresh",fn:function(){e.refresh(n,t)}},r;i(n,t)}},this.beginUpdate=function(){if(l)throw Error("Can't start multiple transactions");var n=l={records:{}};return{commit:function(){l=null,v(n.records,function(n){n.fn()})},cancel:function(){l=null}}},this}]}var l=angular.isDefined,f=angular.isUndefined,s=angular.isFunction,h=angular.isString,d=angular.isObject,p=angular.isArray,v=angular.forEach,m=angular.extend,g=angular.copy,$=angular.equals;angular.element,angular.module("ui.routing",[]),angular.module("ui.routing").provider("$route",o).value("$routeParams",{}),angular.module("ui.routing").provider("$stateTransition",i);var w=["$routeProvider","$stateTransitionProvider",function(n,t){function e(n){if(!b.test(n))throw Error("Invalid name: '"+n+"'.")}function o(t,r,e,a){var o;return l(a)||(a=!0),o=r||"",""!==o&&"/"===o[o.length-1]&&(o=o.substr(0,o.length-1)),"/"!==t[0]&&(o+="/"),o+=t,n.when(o,{state:e,reloadOnSearch:a}),o}function i(n){for(;l(n)&&!l(n.route);)n=n.parent;return n&&n.route||""}function u(n){var t,r=[];if(null===n)return r;for(;null!==(t=x.exec(n));){var e=t[3]||t[9];r.push(e)}return r}function c(n,r,e){var a=r.fullname+"."+n,f=r;l(r.children)||(r.children={}),n in r.children||(r.children[n]={}),r=r.children[n],r.self=m({},e,{$fullname:a}),r.fullname=a,r.parent=f,l(e.route)&&(r.route=o(e.route,i(f),a,e.reloadOnSearch),r.params=u(e.route)),l(e.onEnter)&&t.onEnter(a,e.onEnter),l(e.onExit)&&t.onExit(a,e.onExit),null===e.children?r.children={}:v(e.children,function(n,t){c(t,r,n)})}function s(n){for(var t=w,r="root"===n[0]?1:0;n.length>r;r++){if(!(n[r]in t.children))throw Error("Could not locate '"+n[r]+"' under '"+t.fullname+"'.");t=t.children[n[r]]}return t}function p(n){return s(n.split("."))}function g(n){var t=n.split("."),n=t.pop();return{at:s(t),name:n}}var w={fullname:"root",children:{},self:{$fullname:"root"}},b=/^\w+(\.\w+)*?$/,x=RegExp("/((:(\\w+))|(\\{((\\w+)(\\((.*?)\\))?:)?(\\w+)\\}))","g");this.state=function(n,t){var r;return e(n),r=g(n),c(r.name,r.at,t),this},this.$get=["$rootScope","$q","$injector","$route","$view","$stateTransition","$location",function(n,t,e,o,i,u){function c(n){var t,e=n.match("^\\$node\\(([-+]?\\d+)\\)$"),a=P;if(e?a=s(Number(e[1]),a):(t=n.split("/"),v(t,function(n){a=g(n,a)})),a===w)throw Error("Path expression out of bounds.");return a&&m({},a.self)||r}function s(n,t){var r,e=[];for(v(t.parent.children,function(n){e.push(n),t.fullname===n.fullname&&(r=e.length-1)});0>n;)n+=e.length;return n=(r+n)%e.length,e[n]}function g(n,t){if("."===n){if(P!==t)throw Error("Invalid path expression. Can only define '.' i the beginning of an expression.");return t}if(".."===n){if(f(t.parent))throw Error("Path expression out of bounds.");return t.parent}if(""===n){if(P!==t)throw Error("Invalid path expression.");return w}var r=n.match("^\\[(-?\\d+)\\]$");if(r){var e=Number(r[1]),a=[];if(v(t.children,function(n){a.push(n)}),Math.abs(e)>=a.length)throw Error("Index out of bounds, index selecter must not exeed child count or negative childcount");return 0>e?a[a.length+e]:a[e]}if(n in t.children)return t.children[n];throw Error("Could find state for the lookup path.")}function b(t){l(t)?h(t)||d(t)?(S=a(t),0!==S.indexOf("root")&&(S="root."+S)):t&&(S=w.fullname):S=P.fullname,n.$evalAsync(function(){C(P,I,o.current)})}function x(n,t){function r(){var n={};return v(a.params,function(r){n[r]=t[r]}),n}var e=[],a=n;do e.push({state:a,params:r()});while(a=a.parent);return e}function E(n,t,r,e){for(var a,o,i=x(n,r||{}),u=x(t,e),c=Math.max(i.length,u.length),l=0;c>l;l++)a=i[i.length-l-1],o=u[u.length-l-1],f(a)?o.changed=!0:f(o)?u[0].changed=!0:o.changed=S&&S==o.state.fullname?!0:o.state.fullname!==a.state.fullname?!0:$(o.params,a.params)?!1:!0;return u.reverse()}function C(e,o,c){var l,f,e=p(a(e)),s=m({},e.self,{$params:o,$route:c}),h=O.current,d=u.find(O.current,s),g=!1,$=E(p(a(O.current)),e,h.$params&&h.$params.all,o&&o.all||{}),w={cancel:function(){g=!0},"goto":function(n,t){g=!0,C(n,t)}};d.before(w),g||(l=n.$broadcast("$stateChangeStart",s,h),l.defaultPrevented||t.when(s).then(function(){var t=!1;return f=i.beginUpdate(),i.clear(),v($,function(n){n.changed&&(t=!0),v(n.state.self.views,function(n,r){t?i.setOrUpdate(r,n.template,n.controller):i.setIfAbsent(r,n.template,n.controller)})}),d.between(w),g?(f.cancel(),r):(P=e,I=o,O.current=s,f.commit(),n.$broadcast("$stateChangeSuccess",s,h),r)},function(t){f.cancel(),n.$broadcast("$stateChangeError",s,h,t)}).then(function(){g||(w.cancel=function(){throw Error("Can't cancel transition in after handler")},d.after(w))}))}var S=null,P=w,I={},O={root:w,current:m({},w.self),"goto":function(n,t){C(n,t)},lookup:c,reload:b};return n.$on("$routeChangeSuccess",function(){var n,t=o.current;t?(n={all:t.params,path:t.pathParams,search:t.searchParams},t.state&&C(t.state,n,t)):C(w)}),n.$on("$routeUpdate",function(){}),O}]}];angular.module("ui.routing").provider("$state",w),angular.module("ui.routing").provider("$template",u),angular.module("ui.routing").provider("$view",c);var b=["$state","$anchorScroll","$compile","$controller","$view","$animator",function(n,t,r,e,a,o){return{restrict:"ECA",terminal:!0,link:function(n,i,u){function c(){d&&(d.$destroy(),d=null)}function f(n){n?g.leave(i.contents(),i):i.html(""),c()}function h(o){var u,c=a.get(p);if(c&&c.template){if(c.version===$)return;$=c.version,u=c.controller,c.template.then(function(a){f(o),o?g.enter(angular.element("<div></div>").html(a).contents(),i):i.html(a);var c=r(i.contents());d=n.$new(),u&&(u=e(u,{$scope:d}),i.contents().data("$ngControllerController",u)),c(d),d.$emit("$viewContentLoaded"),d.$eval(m),t()})}else f(o)}var d,p=u.uiView||u.name,v=l(u.ngAnimate),m=u.onload||"",g=o(n,u),$=-1;n.$on("$viewChanged",function(n,t){t===p&&h(v)}),n.$on("$viewRefresh",function(n,t,r){t===p&&(s(d.refresh)?d.refresh(r):d.broadCast("$refresh",t,r))}),n.$on("$stateChangeSuccess",function(){return h(v)}),h(!1)}}}];angular.module("ui.routing").directive("uiView",b)})(window,document);