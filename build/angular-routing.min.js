(function(n,t,e){"use strict";function r(n,t){return v(new(v(function(){},{prototype:n})),t)}function a(n){return h(n)?n:n.$fullname||n.fullname}function o(){function n(n){var t=null;return function(e,r){return null===t&&(t=n?h(n)?function(t,e){var r=a(n,e.params);t.path(r).search(e.params).replace()}:function(t,e){t.url(n(e.pathParams,t.path(),t.search())).replace()}:function(){}),t(e,r)}}function t(n,t,e){var r;if(e&&(r=e.trim(),"{"===r[0]&&"}"===r[r.length-1]||"["===r[0]&&"]"===r[r.length-1]))try{e=angular.fromJson(r)}catch(a){}return{name:n,converter:function(){return m[t](e)}}}function a(n,t){var e="",r=0;return p(i(n),function(a){""!==a.converter,e+=n.slice(r,a.index)+"/"+(""+t[a.name]),r=a.lastIndex,delete t[a.name]}),e+=n.substr(r)}function o(n){return n.replace(b,"\\$&")}function i(n){var t,e=[];if(null===n)return e;for(;null!==(t=x.exec(n));)e.push({name:t[3]||t[9],converter:t[6]||"",args:t[8],index:t.index,lastIndex:x.lastIndex});return e}function u(n){var e="^",r="",a=[],u=0,c="",s={};return null===n?{name:null,params:s}:"/"===n?{exp:RegExp("^[/]?$",c),segments:[],name:r,params:s}:(p(i(n),function(i,c){var l="";e+=o(n.slice(u,i.index)),e+="/([^\\/]*)",""!==i.converter&&(l=":"+i.converter),r+=n.slice(u,i.index)+"/$"+c+l,s[i.name]={id:c,converter:i.converter},a.push(t(i.name,i.converter,i.args)),u=i.lastIndex}),e+=o(n.substr(u)),r+=n.substr(u),w||(r=r.toLowerCase(),c+="i"),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),{exp:RegExp(e+"/?$",c),segments:a,name:r,params:s})}function c(n,t){return null==n?function(){}:function(n){var r,a=n.match(t.exp),o={};return a&&(r=!1,p(t.segments,function(n,t){var e,i;r||(e=a[t+1],i=n.converter()(e),s(i.accept)?(i.accept||(r=!0),o[n.name]=i.value):(i||(r=!0),o[n.name]=e))}),!r)?o:e}}var l=this,f={},m={},$={},w=!0;this.convert=function(n,t){return m[n]=t,l},this.when=function(t,e){var r=u(t);return f[r.name]={self:v({reloadOnSearch:!0},e),redirect:n(e.redirectTo),match:c(t,r),params:r.params,path:t},{convert:l.convert,when:l.when,otherwise:l.otherwise,decorate:l.decorate,ignoreCase:l.ignoreCase,matchCase:l.matchCase,$route:{name:r.name,params:g(r.params),route:t}}},this.otherwise=function(n){return l.when(null,n),l},this.decorate=function(n,t){return $[n]=t,l},this.ignoreCase=function(){return w=!1,l},this.matchCase=function(){return w=!0,l};var b=/[-\/\\^$*+?.()|[\]{}]/g,x=RegExp("/((:(\\w+))|(\\{((\\w+)(\\((.*?)\\))?:)?(\\w+)\\}))","g");this.convert("num",function(){return function(n){var t=!isNaN(n);return{accept:t,value:t?Number(n):0}}}),this.convert("regex",function(n){var t,e,r="";if(d(n)&&s(n.exp))t=n.exp,s(n.flags)&&(r=n.flags);else{if(!(h(n)&&n.length>0))throw Error("The Regular-expression converter was not initialized with a valid object.");t=n}return e=RegExp(t,r),function(n){var t=e.test(n);return{accept:t,value:t?e.exec(n):null}}}),this.convert("",function(){return function(){return!0}}),this.$get=["$rootScope","$location","$q","$injector","$routeParams",function(n,t,o,i,u){function c(n,t,e){var a=r(n,{self:r(n.self,{params:v({},e,t),searchParams:e,pathParams:t})});return a}function s(n){var e,r;return p(f,function(a){!r&&(e=a.match(n))&&(r=c(a,e,t.search()))}),r||f[null]&&c(f[null],{},{})}function l(){var r=s(t.path()),a=d.current,c=r?r.self:e;if(!h&&c&&a&&angular.equals(c.pathParams,a.pathParams)&&!c.reloadOnSearch)a.params=r.params,g(c.params,u),n.$broadcast("$routeUpdate",a);else if(r||a){h=!1;var l=n.$broadcast("$routeChangeStart",c,a);if(!l.defaultPrevented){d.current=c,r&&r.redirect(t,c);var f=o.when(c);c&&p($,function(n){f=f.then(function(){var t=i.invoke(n,c,{$next:c});return o.when(t)})}),f.then(function(){c===d.current&&(r&&angular.copy(c.params,u),n.$broadcast("$routeChangeSuccess",c,a))},function(t){c===d.current&&n.$broadcast("$routeChangeError",c,a,t)})}}}var h=!1,d={routes:f,reload:function(){h=!0,n.$evalAsync(l)},change:function(n){var e=n.params||{},r=a(n.route,e),o=t.path(r).search(e||{});n.replace&&o.replace()}};return n.$on("$locationChangeSuccess",l),d}]}function i(){function n(n){var t={handler:{}};return s(n.to)&&(t.to=n.to),s(n.from)&&(t.from=n.from),s(n.handler)&&(t.handler=n.handler),s(n.before)&&l(t.handler.before)&&(t.handler.before=n.before),s(n.between)&&l(t.handler.between)&&(t.handler.between=n.between),s(n.after)&&l(t.handler.after)&&(t.handler.after=n.after),t}function t(n,t){var r=e(n),a=e(t);if(!r||!a){if(r)throw Error("Invalid transition - to: '"+t+"'.");if(a)throw Error("Invalid transition - from: '"+n+"'.");throw Error("Invalid transition - from: '"+n+"', to: '"+t+"'.")}}function e(n){return"*"===n||i.test(n)?!0:!1}function r(n){for(var t=o,e=n.split("."),r="root"===e[0]?1:0;e.length>r;r++)e[r]in t.children||(t.children[e[r]]={children:{},targets:{}}),t=t.children[e[r]];return t}var o={children:{},targets:{}},i=/^\w+(\.\w+)*(\.[*])?$/,u=this;this.onEnter=function(t,e){if(d(e)){var r=n(e);this.transition(r.from||"*",t,r.handler)}else(f(e)||m(e))&&this.transition("*",t,e)},this.onExit=function(t,e){if(d(e)){var r=n(e);this.transition(t,r.to||"*",r.handler)}else(f(e)||m(e))&&this.transition(t,"*",e)},this.transition=function(n,e,o){var i,u=this;if(m(n))p(n,function(n){u.transition(n,e,o)});else if(m(e))p(e,function(t){u.transition(n,t,o)});else{if(n=a(n),e=a(e),e===n&&-1===e.indexOf("*"))return this;t(n,e),(angular.isFunction(o)||angular.isArray(o))&&(o={between:o}),i=r(n),e in i.targets||(i.targets[e]=[]),o.name=n+" -> "+e,i.targets[e].push(o)}return this},this.$get=["$q","$injector",function(n,t){function e(n,e){function r(r,a){var o;p(i,function(i){s(o=r(i))&&t.invoke(o,u,{$to:e,$from:n,$transition:a})})}var o=l(a(n)),i=c(o,a(e));return{before:function(n){r(function(n){return n.before},n)},between:function(n){r(function(n){return n.between},n)},after:function(n){r(function(n){return n.after},n)}}}function r(n){return"root"===n[0]&&n.splice(0,1),n}function i(n,t){for(var e,a,o=r(n.split(".")).reverse(),i=r(t.split(".")).reverse();;){if(e=o.pop(),a=i.pop(),"*"===a||"*"===e)return!0;if(e!==a)return!1;if(!s(e)||!s(a))return!0}return!0}function c(n,t){var e=[];return p(n,function(n){p(n.targets,function(n,r){i(r,t)&&p(n,function(n){e.push(n)})})}),e}function l(n){var t=o,e=n.split("."),r=[],a="root"===e[0]?1:0;do{if("*"in t.children&&r.push(t.children["*"]),!(e[a]in t.children))break;t=t.children[e[a]],r.push(t)}while(a++<e.length);return r}var f={root:o,find:e};return f}]}function u(){var n=RegExp("^(((http|https|ftp)://([\\w-\\d]+\\.)+[\\w-\\d]+){0,1}(/?[\\w~,;\\-\\./?%&+#=]*))","i");this.$get=["$http","$q","$injector","$templateCache",function(t,e,r,a){function o(n){return t.get(n,{cache:a}).then(function(n){return n.data})}function i(n){return e.when(r.invoke(n))}function u(n){if(s(n.url))return o(n.url);if(s(n.fn))return i(n.fn);if(s(n.html))return e.when(n.html);throw Error("Object must define url, fn or html.")}return this.get=function(t){if(h(t))return n.test(t)?o(t):e.when(t);if(f(t)||m(t))return i(t);if(d(t))return u(t);throw Error("Template must be either an url as string, function or a object defining either url, fn or html.")},this}]}function c(){this.$get=["$rootScope","$q","$template",function(n,t,r){function a(n){if("undefined"===n)throw Error("Must define a view name.")}function o(t){n.$broadcast("$viewUpdate",t)}function i(t,e){n.$broadcast("$viewRefresh",t,e)}function u(n,t){return t in n&&null!==n[t]}var c={},f=null;return this.clear=function(n){var t=this;if(l(n))p(c,function(n,e){t.clear(e)});else{if(f)return f.records[n]={act:"clear",fn:function(){t.clear(n)}},e;delete c[n],o(n)}},this.setOrUpdate=function(n,t,l,d){var m=this;return a(n),f?(f.records[n]={act:"setOrUpdate",fn:function(){m.setOrUpdate(n,t,l,d)}},e):(u(c,n)?(c[n].template=r.get(t),c[n].controller=l):c[n]={template:r.get(t),controller:l,version:-1},s(d)&&h(d)&&c[n].sticky===d?i(n,{sticky:!0}):(c[n].version++,c[n].sticky=d,o(n)),e)},this.setIfAbsent=function(n,t,i){var s=this;return a(n),f?(u(f.records,n)&&"clear"!==f.records[n].act||(f.records[n]={act:"setIfAbsent",fn:function(){s.setIfAbsent(n,t,i)}}),e):(u(c,n)||(c[n]={template:r.get(t),controller:i,version:0},o(n)),e)},this.get=function(n){return l(n)?c:c[n]},this.refresh=function(n,t){var r=this;if(l(n))p(c,function(n,t){r.clear(t)});else{if(f)return f.records[n]={act:"refresh",fn:function(){r.refresh(n,t)}},e;i(n,t)}},this.beginUpdate=function(){if(f)throw Error("Can't start multiple transactions");var n=f={records:{}};return{commit:function(){f=null,p(n.records,function(n){n.fn()})},cancel:function(){f=null}}},this}]}var s=angular.isDefined,l=angular.isUndefined,f=angular.isFunction,h=angular.isString,d=angular.isObject,m=angular.isArray,p=angular.forEach,v=angular.extend,g=angular.copy,$=angular.equals;angular.element,angular.module("ui.routing",[]),angular.module("ui.routing").provider("$route",o).value("$routeParams",{}),angular.module("ui.routing").provider("$stateTransition",i);var w=["$routeProvider","$stateTransitionProvider",function(n,t){function r(n){if(!x.test(n))throw Error("Invalid name: '"+n+"'.")}function o(t,e,r,a){var o;return s(a)||(a=!0),o=e||"",""!==o&&"/"===o[o.length-1]&&(o=o.substr(0,o.length-1)),"/"!==t[0]&&(o+="/"),o+=t,n.when(o,{state:r,reloadOnSearch:a})}function i(n){for(;s(n)&&!s(n.route);)n=n.parent;return n&&n.route.route||""}function u(n,e,r){var a=e.fullname+"."+n,c=e;s(e.children)||(e.children={}),n in e.children||(e.children[n]={}),e=e.children[n],e.self=v({},r,{$fullname:a}),e.fullname=a,e.parent=c,s(r.route)&&(e.route=o(r.route,i(c),a,r.reloadOnSearch).$route),s(r.onEnter)&&t.onEnter(a,r.onEnter),s(r.onExit)&&t.onExit(a,r.onExit),null===r.children?e.children={}:p(r.children,function(n,t){u(t,e,n)})}function c(n){for(var t=b,e="root"===n[0]?1:0;n.length>e;e++){if(!(n[e]in t.children))throw Error("Could not locate '"+n[e]+"' under '"+t.fullname+"'.");t=t.children[n[e]]}return t}function g(n){return c(n.split("."))}function w(n){var t=n.split("."),n=t.pop();return{at:c(t),name:n}}var b={fullname:"root",children:{},self:{$fullname:"root"}},x=/^\w+(\.\w+)*?$/;this.state=function(n,t){var e;return r(n),e=w(n),u(e.name,e.at,t),this},this.$get=["$rootScope","$q","$injector","$route","$view","$stateTransition","$location",function(n,t,r,o,i,u){function c(n){var t,r=n.match("^\\$node\\(([-+]?\\d+)\\)$"),a=I;if(r?a=w(Number(r[1]),a):(t=n.split("/"),p(t,function(n){a=x(n,a)})),a===b)throw Error("Path expression out of bounds.");return a&&v({},a.self)||e}function w(n,t){var e,r=[];for(p(t.parent.children,function(n){r.push(n),t.fullname===n.fullname&&(e=r.length-1)});0>n;)n+=r.length;return n=(e+n)%r.length,r[n]}function x(n,t){if("."===n){if(I!==t)throw Error("Invalid path expression. Can only define '.' i the beginning of an expression.");return t}if(".."===n){if(l(t.parent))throw Error("Path expression out of bounds.");return t.parent}if(""===n){if(I!==t)throw Error("Invalid path expression.");return b}var e=n.match("^\\[(-?\\d+)\\]$");if(e){var r=Number(e[1]),a=[];if(p(t.children,function(n){a.push(n)}),Math.abs(r)>=a.length)throw Error("Index out of bounds, index selecter must not exeed child count or negative childcount");return 0>r?a[a.length+r]:a[r]}if(n in t.children)return t.children[n];throw Error("Could find state for the lookup path.")}function E(t){s(t)?h(t)||d(t)?(y=a(t),0!==y.indexOf("root")&&(y="root."+y)):t&&(y=b.fullname):y=I.fullname,n.$evalAsync(function(){S({state:I,params:k,route:o.current})})}function C(n,t){function e(){var n={};return a.route&&p(a.route.params,function(e,r){n[r]=t[r]}),n}var r=[],a=n;do r.push({state:a,params:e()});while(a=a.parent);return r}function P(n,t,e,r){for(var a,o,i=C(n,e||{}),u=C(t,r),c=Math.max(i.length,u.length),s=0;c>s;s++)a=i[i.length-s-1],o=u[u.length-s-1],l(a)?o.changed=!0:l(o)?u[0].changed=!0:o.changed=y&&y==o.state.fullname?!0:o.state.fullname!==a.state.fullname?!0:$(o.params,a.params)?!1:!0;return u.reverse()}function S(c){var l,d=c.params,$=c.route,w=g(a(c.state)),b=v({},w.self,{$params:d,$route:$}),x=O.current,E=u.find(O.current,b),C=!1,y=P(g(a(O.current)),w,x.$params&&x.$params.all,d&&d.all||{}),A={cancel:function(){C=!0},"goto":function(n,t){C=!0,S({state:n,params:t})}};if(c.updateroute&&w.route)return o.change(v({},w.route,{params:d})),e;if(E.before(A),!C){var U=n.$broadcast("$stateChangeStart",b,x);U.defaultPrevented||t.when(b).then(function(){var t=!1;return l=i.beginUpdate(),i.clear(),p(y,function(n){n.changed&&(t=!0),p(n.state.self.views,function(e,a){var o;e.sticky&&(o=e.sticky,f(o)||m(o)?o=r.invoke(o,o,{$to:b,$from:x}):h(o)||(o=n.state.fullname)),t||s(o)?i.setOrUpdate(a,e.template,e.controller,o):i.setIfAbsent(a,e.template,e.controller)})}),E.between(A),C?(l.cancel(),e):(I=w,k=d,O.current=b,l.commit(),n.$broadcast("$stateChangeSuccess",b,x),e)},function(t){l.cancel(),n.$broadcast("$stateChangeError",b,x,t)}).then(function(){C||(A.cancel=function(){throw Error("Can't cancel transition in after handler")},E.after(A))})}}var y=null,I=b,k={},O={root:b,current:v({},b.self),"goto":function(n,t){S({state:n,params:t,updateroute:!0})},lookup:c,reload:E};return n.$on("$routeChangeSuccess",function(){var n,t=o.current;t?(n={all:t.params,path:t.pathParams,search:t.searchParams},t.state&&S({state:t.state,params:n,route:t})):S({state:b})}),n.$on("$routeUpdate",function(){var n,t=o.current;t&&(n={all:t.params,path:t.pathParams,search:t.searchParams})}),O}]}];angular.module("ui.routing").provider("$state",w),angular.module("ui.routing").provider("$template",u),angular.module("ui.routing").provider("$view",c);var b=["$state","$anchorScroll","$compile","$controller","$view","$animator",function(n,t,e,r,a,o){return{restrict:"ECA",terminal:!0,link:function(n,i,u){function c(){d&&(d.$destroy(),d=null)}function l(n){n?g.leave(i.contents(),i):i.html(""),c()}function h(o){var u,c=a.get(m);if(c&&c.template){if(c.version===$)return;$=c.version,u=c.controller,c.template.then(function(a){l(o),o?g.enter(angular.element("<div></div>").html(a).contents(),i):i.html(a);var c=e(i.contents());d=n.$new(),u&&(u=r(u,{$scope:d}),i.contents().data("$ngControllerController",u)),c(d),d.$emit("$viewContentLoaded"),d.$eval(v),t()})}else l(o)}var d,m=u.uiView||u.name,p=s(u.ngAnimate),v=u.onload||"",g=o(n,u),$=-1;n.$on("$viewChanged",function(n,t){t===m&&h(p)}),n.$on("$viewRefresh",function(n,t,e){t===m&&(f(d.refresh)?d.refresh(e):d.$broadcast("$refresh",t,e))}),n.$on("$stateChangeSuccess",function(){return h(p)}),h(!1)}}}];angular.module("ui.routing").directive("uiView",b)})(window,document);